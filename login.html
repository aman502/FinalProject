<!DOCTYPE html>
<html>
<head>
	<title>Login</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous"> 
    <link rel="stylesheet" href="site.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>	
</head>
<body>
	<div class="col-md-4 col-md-offset-4">
		<div class="container">
			<h1>Login to Order the Food</h1>
		</div>
		<div class="form-group">
			<form id="form">
				<input type="text" name="email" id="txtEmail" placeholder="Email" required class="form-control"><br/>
				<input type="password" name="password" id="txtPassword" placeholder="Password" required class="form-control"><br/>
				<input type="button" id="btnLogin" value="Login" class="btn btn-success">
			</form>
		</div>
		<div><span>Create a new Account?</span><a href="register.html">Register here</a>
		</div>
		
	</div>
	<script type="text/javascript">
		$(document).ready(function(){
            $("#btnLogin").click(function(){

				var email= $("#txtEmail").val();
                var pass= $("#txtPassword").val();
				
				if(email=="" || pass=="")
				{
					alert("Please check values. All the fields are required.");
				}
				else
				{
				var qString = "email="+email+"&pass="+pass;
                var path = "http://localhost:3000/login?"+qString;

				$.ajax({
					type: 'GET',
					url: path,
					success: function(response){
						 window.location.href="welcome.html?fname="+response.firstname+"&lname="+response.lastname+"&Email="+response.email;
         				},
         				error: function(response) {
							console.log(response);
         				}
         			})
				}
			});		 
		});
	</script>
</body>
</html>
